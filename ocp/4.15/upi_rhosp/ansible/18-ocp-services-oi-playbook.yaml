---
- name: "Check required variables"
  hosts: "localhost"
  # gather_facts: true
  # vars:
  #   openstack_network_cidr: 'unknown'

  tasks:
  - name: Gather information about a previously created subnet by name
    openstack.cloud.subnets_info:
      name: "{{ openstack_network }}"
    register: openstack_subnet_res

  - name: "Print CIDR"
    ansible.builtin.debug:
      msg:
        - "openstack_subnet_res: {{ openstack_subnet_res.subnets[0].cidr }}"

  post_tasks:
  - name: "Print CIDR"
    ansible.builtin.set_fact:
      openstack_network_cidr: "{{ openstack_subnet_res.subnets[0].cidr }}"

- name: "Openshift Install"
  import_playbook: ../../ansible/18-ocp-services-oi-playbook.yaml
  vars: 
    # network_cidr: "{{ openstack_network_cidr }}"
    network_cidr: "{{ hostvars['localhost']['openstack_network_cidr'] }}"

...
