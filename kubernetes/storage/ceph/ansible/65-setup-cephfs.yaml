---
- name: "Create cephfs StorageClass"
  hosts: "{{ k8s_host | default('localhost') }}"
  gather_facts: "{{ gathering_host_info | default('true') | bool == true }}"

  pre_tasks:

  tasks:

  - name: "Template cephfs StorageClass file"
    ansible.builtin.template:
      src: "storage-class.yml.j2"
      dest: "/tmp/storage-class.yml"

  - name: "Create cephfs StorageClass"
    kubernetes.core.k8s:
      src: /tmp/storage-class.yml
      state: present
...

